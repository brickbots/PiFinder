{% extends "base.html" %}

{% block content %}
<div class="row valign-wrapper" style="margin: 0;">
    <div class="col s12">
{% if instrument_id < 0 %}
            <h3 class="grey-text">{{ _('Add a new instrument') }}</h3>
{% else %}
            <h3 class="grey-text">{{ _('Edit instrument') }}</h3>
{% endif %}
    </div>
</div>

{% if error_message %}
<div class="row">
    <div class="col s12">
        <p class="red-text">{{ error_message }}</p>
    </div>
</div>
{% endif %}

<form action="/equipment/add_instrument/{{ instrument_id }}" method="post" id="add_instrument" class="col s12">
    <div class="row">
        <div class="row">
            <div class="input-field col s12">
                <input value="{{ telescope.make }}" id="make" type="text" name="make">
                <label for="make">{{ _('Make') }}</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input value="{{ telescope.name }}" id="name" type="text" name="name">
                <label for="name">{{ _('Instrument Name') }}</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input value="{{ telescope.aperture_mm }}" id="aperture" type="number" name="aperture">
                <label for="aperture">{{ _('Aperture (in mm)') }}</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input value="{{ telescope.focal_length_mm }}" id="focal_length_mm" type="number" name="focal_length_mm">
                <label for="focal_length_mm">{{ _('Focal Length (in mm)') }}</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input value="{{ telescope.obstruction_perc }}" id="obstruction_perc" type="number" name="obstruction_perc">
                <label for="obstruction_perc">{{ _('Obstruction %') }}</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <select name="mount_type">
                    <option value="alt/az" {% if telescope.mount_type == "alt/az" %}selected{% endif %}>{{ _('Alt/Az') }}</option>
                    <option value="equatorial" {% if telescope.mount_type == "equatorial" %}selected{% endif %}>{{ _('Equatorial') }}</option>
                </select>
                <label>
                    {{ _('Mount Type') }}
                </label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <label>
                    <input type="checkbox" id="flip" {% if telescope.flip_image %}checked{% endif %} name="flip" />
                    <span>{{ _('Flip image (upside down)') }}</span>
                </label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <label>
                    <input type="checkbox" id="flop" {% if telescope.flop_image %}checked{% endif %} name="flop" />
                    <span>{{ _('Flop image (left right)') }}</span>
                </label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <label>
                    <input type="checkbox" id="reverse_arrow_a" {% if telescope.reverse_arrow_a %}checked{% endif %} name="reverse_arrow_a" />
                    <span>{{ _('Reverse Arrow A') }}</span>
                </label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <label>
                    <input type="checkbox" id="reverse_arrow_b" {% if telescope.reverse_arrow_b %}checked{% endif %} name="reverse_arrow_b" />
                    <span>{{ _('Reverse Arrow B') }}</span>
                </label>
            </div>
        </div>
    </div>
</form>

<a href="#" onClick="document.getElementById('add_instrument').submit();"
   class="btn">
{% if instrument_id < 0 %}
    {{ _('Add instrument!') }}
{% else %}
    {{ _('Update instrument!') }}
{% endif %}
</a>
<a href="/equipment" class="btn">{{ _('Cancel') }}</a>

<br />
<br />
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let elems = document.querySelectorAll('select');
        let instances = M.FormSelect.init(elems);
    });
</script>
{% endblock %}